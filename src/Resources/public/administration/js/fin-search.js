!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/bundles/finsearch/",n(n.s="xZag")}({"6q4v":function(e,t){e.exports="{% block sw_extension_card_base_context_menu_settings %}\n    <sw-context-menu-item\n            v-if=\"isInstalled && extension.configurable\"\n            :routerLink=\"{ name: extension.name === 'FinSearch' ? 'findologic.module.index' : 'sw.extension.config', params: { namespace: extension.name } }\">\n\n        {{ $tc('sw-extension-store.component.sw-extension-card-base.contextMenu.config') }}\n    </sw-context-menu-item>\n{% endblock %}\n"},KBz0:function(e){e.exports=JSON.parse('{"findologic":{"header":"FINDOLOGIC","general":{"mainMenuDescription":"FINDOLOGIC Plugin für das Shopware 6 E-Commerce System"},"fieldRequired":"Shopkey ist erforderlich.","invalidShopkey":"Ungültiger Shopkey.","shopkeyExists":"Dieser Shopkey is bereits einer anderen Sprache zugeordnet.","notRegisteredShopkey":"Der eingegebene Shopkey ist keinem bekannten Service zugeordnet.","selectSalesChannel":"Bitte wählen Sie einen Verkaufskanal...","settingForm":{"salesChannelTitle":"Verkaufskanal & Sprache","directIntegration":{"title":"Direct Integration"},"api":{"title":"API"},"configSaved":"Konfiguration gespeichert.","testButton":"Testmodus","config":{"title":"Konfiguration","shopkey":{"label":"Shopkey","tooltipText":"FINDOLOGIC shopkey"},"active":{"label":"Aktiv","tooltipText":"Aktiviert die FINDOLOGIC Suche."},"activeOnCategoryPages":{"label":"Aktiv auf Kategorieseiten","tooltipText":"Aktiviert die FINDOLOGIC Suche für Kategorieseiten."},"searchResultContainer":{"label":"CSS-Klasse für Suchresultat","placeholder":"fl-result","tooltipText":"Diese Option ist nur bei Direct Integration wirksam, wenn kein Wert gegeben ist wird fl-result verwendet"},"navigationResultContainer":{"label":"CSS-Klasse für Navigation","placeholder":"fl-navigation-result","tooltipText":"Diese Option ist nur bei Direct Integration wirksam, wenn kein Wert gegeben ist wird fl-navigation-result verwendet."},"crossSellingCategories":{"label":"Cross-Selling Kategorien","placeholder":"Kategorien suchen...","tooltipText":"Sollten Sie mehrere Subkategorien in Ihrer Cross-Selling Kategorie haben, fügen sie jede Subkategorie ein. Produkte in diesen Kategorien werden vom Export ausgeschlossen"},"integrationType":{"label":"Integration (schreibgeschützt)","tooltipText":"Die aktuell verwendete Integrationsart. Entweder Direct Integration oder API."},"filterPosition":{"label":"Position der Filter auf Suchergebnisseiten","tooltipText":"Oben: Zeigt die Filter über dem Suchergebnis an. Links: Zeigt die Filter auf der linken Seite, neben dem Suchergebnis, an","top":{"label":"Oben"},"left":{"label":"Links"}},"export":{"title":"Export"},"mainVariant":{"label":"Exportierte Hauptvariante","tooltipText":"Wählen um die Variante, die auf Listing-Seiten angezeigt wird, zu ändern.","default":{"label":"Shopware Standard"},"parent":{"label":"Haupt-/Eltern Produkt"},"cheapest":{"label":"Günstigste Variante"}}},"titleSuccess":"Erfolgreich","titleError":"Fehler"},"error":{"title":"Fehler"}}}')},SZ7m:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},o=0;o<t.length;o++){var a=t[o],r=a[0],s={id:e+":"+o,css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(s):n.push(i[r]={id:r,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return h}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},r=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,g=function(){},u=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,o){c=n,u=o||{};var r=i(e,t);return p(r),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o];(l=a[s.id]).refs--,n.push(l)}t?p(r=i(e,t)):r=[];for(o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete a[l.id]}}}}function p(e){for(var t=0;t<e.length;t++){var n=e[t],i=a[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(v(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var r=[];for(o=0;o<n.parts.length;o++)r.push(v(n.parts[o]));a[n.id]={id:n.id,refs:1,parts:r}}}}function y(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function v(e){var t,n,i=document.querySelector("style["+d+'~="'+e.id+'"]');if(i){if(c)return g;i.parentNode.removeChild(i)}if(f){var o=l++;i=s||(s=y()),t=S.bind(null,i,o,!1),n=S.bind(null,i,o,!0)}else i=y(),t=C.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var m,b=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function S(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function C(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(d,t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},cEZJ:function(e,t,n){var i=n("vAmH");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("e5a1a062",i,!0,{})},iH4O:function(e,t){e.exports='{% block findologic_credentials %}\n    <sw-container slot="grid" rows="auto auto">\n        <sw-card-section>\n            <sw-card class="sw-card--grid"\n                     :title="$tc(\'findologic.settingForm.config.title\')">\n                <sw-container>\n                    {% block findologic_credentials_card_container %}\n                        {% block findologic_credentials_settings %}\n                            <div class="findologic-settings-credentials-fields">\n                                <sw-text-field\n                                        v-model="actualConfigData[\'FinSearch.config.shopkey\']"\n                                        :label="$tc(\'findologic.settingForm.config.shopkey.label\')"\n                                        :helpText="$tc(\'findologic.settingForm.config.shopkey.tooltipText\')"\n                                        :required="true"\n                                        :error="shopkeyErrorState"\n                                >\n                                </sw-text-field>\n                                <sw-switch-field\n                                        v-model="actualConfigData[\'FinSearch.config.active\']"\n                                        :label="$tc(\'findologic.settingForm.config.active.label\')"\n                                        :helpText="$tc(\'findologic.settingForm.config.active.tooltipText\')"\n                                >\n                                </sw-switch-field>\n                                <sw-button\n                                        v-show="showTestButton"\n                                        @click="openSalesChannelUrl"\n                                >\n                                    {{ $tc(\'findologic.settingForm.testButton\') }}\n                                </sw-button>\n                                <span class="divider"></span>\n                                <sw-text-field\n                                        v-model="actualConfigData[\'FinSearch.config.integrationType\']"\n                                        ref="integrationType"\n                                        :label="$tc(\'findologic.settingForm.config.integrationType.label\')"\n                                        :helpText="$tc(\'findologic.settingForm.config.integrationType.tooltipText\')"\n                                        :disabled="true"\n                                >\n                                </sw-text-field>\n                            </div>\n                        {% endblock %}\n                    {% endblock %}\n                </sw-container>\n            </sw-card>\n\n\n            <sw-card class="sw-card--grid"\n                     :title="$tc(\'findologic.settingForm.config.export.title\')">\n                <sw-container>\n                    <div class="findologic-settings-credentials-fields">\n                        <sw-single-select\n                                v-model="actualConfigData[\'FinSearch.config.mainVariant\']"\n                                :options="mainVariantOptions"\n                                :label="$tc(\'findologic.settingForm.config.mainVariant.label\')"\n                                :placeholder="$tc(\'findologic.settingForm.config.mainVariant.default.label\')"\n                                :helpText="$tc(\'findologic.settingForm.config.mainVariant.tooltipText\')">\n                        </sw-single-select>\n\n                        <sw-category-tree-field\n                                id="crossSellingCategories"\n                                :categories-collection="categories"\n                                :label="$tc(\'findologic.settingForm.config.crossSellingCategories.label\')"\n                                :helpText="$tc(\'findologic.settingForm.config.crossSellingCategories.tooltipText\')"\n                                :placeholder="$tc(\'findologic.settingForm.config.crossSellingCategories.placeholder\')"\n                                @selection-add="onCategoryAdd"\n                                @selection-remove="onCategoryRemove"\n                        >\n                        </sw-category-tree-field>\n                    </div>\n                </sw-container>\n            </sw-card>\n\n            <sw-card class="sw-card--grid"\n                     v-if="showDIConfig"\n                     :title="$tc(\'findologic.settingForm.directIntegration.title\')">\n                <sw-container>\n\n                    <div class="findologic-settings-credentials-fields">\n                        <sw-text-field\n                                v-model="actualConfigData[\'FinSearch.config.searchResultContainer\']"\n                                :label="$tc(\'findologic.settingForm.config.searchResultContainer.label\')"\n                                :helpText="$tc(\'findologic.settingForm.config.searchResultContainer.tooltipText\')"\n                                :placeholder="$tc(\'findologic.settingForm.config.searchResultContainer.placeholder\')"\n                        >\n                        </sw-text-field>\n                        <sw-text-field\n                                v-model="actualConfigData[\'FinSearch.config.navigationResultContainer\']"\n                                :label="$tc(\'findologic.settingForm.config.navigationResultContainer.label\')"\n                                :helpText="$tc(\'findologic.settingForm.config.navigationResultContainer.tooltipText\')"\n                                :placeholder="$tc(\'findologic.settingForm.config.navigationResultContainer.placeholder\')"\n                        >\n                        </sw-text-field>\n                    </div>\n                </sw-container>\n            </sw-card>\n\n            <sw-card class="sw-card--grid" v-if="showAPIConfig" :title="$tc(\'findologic.settingForm.api.title\')">\n                <sw-container>\n\n                    <div class="findologic-settings-credentials-fields">\n\n                        {% block findologic_credentials_settings_search_filter_position_container %}\n                            <sw-switch-field\n                                v-model="actualConfigData[\'FinSearch.config.activeOnCategoryPages\']"\n                                :label="$tc(\'findologic.settingForm.config.activeOnCategoryPages.label\')"\n                                :helpText="$tc(\'findologic.settingForm.config.activeOnCategoryPages.tooltipText\')"\n                            >\n                            </sw-switch-field>\n                            <sw-single-select\n                                    v-model="actualConfigData[\'FinSearch.config.filterPosition\']"\n                                    :options="filterPositionOptions"\n                                    :label="$tc(\'findologic.settingForm.config.filterPosition.label\')"\n                                    :helpText="$tc(\'findologic.settingForm.config.filterPosition.tooltipText\')">\n                            </sw-single-select>\n                        {% endblock %}\n                    </div>\n                </sw-container>\n            </sw-card>\n        </sw-card-section>\n    </sw-container>\n{% endblock %}\n'},kfPE:function(e){e.exports=JSON.parse('{"findologic":{"header":"FINDOLOGIC","general":{"mainMenuDescription":"FINDOLOGIC plugin for Shopware 6 e-commerce system"},"fieldRequired":"Shopkey is required.","invalidShopkey":"Invalid Shopkey.","shopkeyExists":"This shopkey is already configured for another language.","notRegisteredShopkey":"The given shopkey is not associated to any known service.","selectSalesChannel":"Please select a Sales Channel...","settingForm":{"salesChannelTitle":"Sales Channel & Language","directIntegration":{"title":"Direct Integration"},"api":{"title":"API"},"configSaved":"Configuration saved.","testButton":"Test mode","config":{"title":"Configuration","shopkey":{"label":"Shopkey","tooltipText":"FINDOLOGIC shopkey"},"active":{"label":"Active","tooltipText":"Activate the FINDOLOGIC search provider."},"activeOnCategoryPages":{"label":"Active on category pages","tooltipText":"Activate the FINDOLOGIC search provider for category pages."},"searchResultContainer":{"label":"CSS class for search result","placeholder":"fl-result","tooltipText":"This option has an effect for Direct Integration only, when empty fl-result is used."},"navigationResultContainer":{"label":"CSS class for navigation","placeholder":"fl-navigation-result","tooltipText":"This option has an effect for Direct Integration only, when empty fl-navigation-result is used."},"crossSellingCategories":{"label":"Cross-Selling categories","placeholder":"Search categories...","tooltipText":"If you have multiple subcategories in your Cross-Selling category, make sure to add all subcategories. Products in these categories are excluded from the export"},"integrationType":{"label":"Integration (read-only)","tooltipText":"Currently used integration type. Either one of Direct Integration or API."},"filterPosition":{"label":"Filter position for search result pages","tooltipText":"Top: Shows the filters above the search results. Left: Shows the filters on the left side, next to the search results.","top":{"label":"Top"},"left":{"label":"Left"}},"export":{"title":"Export"},"mainVariant":{"label":"Exported main variant","tooltipText":"Select to change the variant that is shown on listing pages.","default":{"label":"Shopware default"},"parent":{"label":"Main-/Parent product"},"cheapest":{"label":"Cheapest variant"}}},"titleSuccess":"Success","titleError":"Error"},"error":{"title":"Error"}}}')},kmpu:function(e,t){e.exports="{% block sw_plugin_list_grid_columns_actions_settings %}\n    <template v-if=\"item.composerName === 'findologic/plugin-shopware-6'\">\n        <sw-context-menu-item :routerLink=\"{ name: 'findologic.module.index' }\">\n            {{ $tc('sw-plugin.list.config') }}\n        </sw-context-menu-item>\n    </template>\n\n    <template v-else>\n        {% parent %}\n    </template>\n{% endblock %}\n"},rtuN:function(e,t){e.exports='{% block findologic %}\n    <sw-page class="findologic">\n        {% block findologic_header %}\n            <template slot="smart-bar-header">\n                <h2>\n                    {{ $tc($route.meta.$module.title) }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'findologic.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block findologic_actions %}\n            <template slot="smart-bar-actions">\n                {% block findologic_actions_save %}\n                    <sw-button\n                            class="sw-settings-login-registration__save-action"\n                            :isLoading="isLoading"\n                            :disabled="isLoading"\n                            variant="primary"\n                            :title="$tc(\'global.default.save\')"\n                            :aria-label="$tc(\'global.default.save\')"\n                            v-model="isSaveSuccessful"\n                            @click="onSave"\n                    >\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block findologic_actions_cancel %}\n                    <sw-button\n                            :routerLink="{ name: $route.meta.parentPath }"\n                            :title="$tc(\'global.default.cancel\')"\n                            :aria-label="$tc(\'global.default.cancel\')">\n                        {{ $tc(\'global.default.cancel\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n\n        {% block findologic_content %}\n            <template slot="content">\n                {% block findologic_content_card %}\n                    <sw-card-view>\n                        {% block findologic_content_card_channel_config %}\n                            {% block findologic_content_card_channel_config_sales_channel_card %}\n                                <sw-card :title="$tc(\'findologic.settingForm.salesChannelTitle\')">\n                                    {% block findologic_content_card_channel_config_sales_channel_card_title %}\n                                        <sw-entity-single-select\n                                                id="salesChannelSelect"\n                                                :placeholder="$tc(\'sw-sales-channel-switch.labelDefaultOption\')"\n                                                :searchPlaceholder="$tc(\'sw-sales-channel-switch.placeholderSelect\')"\n                                                :resetOption="$tc(\'sw-sales-channel-switch.labelDefaultOption\')"\n                                                @change="onSelectedSalesChannel"\n                                                v-model="selectedSalesChannelId"\n                                                entity="sales_channel">\n                                            <template #labelProperty="{item, labelProperty}">\n                                                <span v-if="item.translated">{{ item.translated[labelProperty] }}</span>\n                                            </template>\n                                        </sw-entity-single-select>\n\n                                        <sw-single-select\n                                                ref="languageSelection"\n                                                class="sw-language-switch__select"\n                                                :options="language"\n                                                id="language"\n                                                :placeholder="$tc(\'findologic.selectSalesChannel\')"\n                                                :disabled="!selectedSalesChannelId"\n                                                required\n                                                v-model="selectedLanguageId"\n                                                @change="onSelectedLanguage">\n                                        </sw-single-select>\n\n                                    {% endblock %}\n                                </sw-card>\n\n                                {% block findologic_content_card_channel_config_credentials_card %}\n                                    <findologic-config\n                                            v-if="actualConfigData"\n                                            :isActive="isActive"\n                                            :shopkeyAvailable="shopkeyAvailable"\n                                            :isValidShopkey="isValidShopkey"\n                                            :isStagingShop="isStagingShop"\n                                            :allConfigs="allConfigs"\n                                            :actualConfigData="actualConfigData"\n                                            :shopkeyErrorState="shopkeyErrorState"\n                                            :selectedSalesChannelId="selectedSalesChannelId"\n                                            :selectedSalesChannelNavigationCategoryId="selectedSalesChannelNavigationCategoryId">\n                                    </findologic-config>\n                                {% endblock %}\n                            {% endblock %}\n\n                            {% block findologic_content_card_loading %}\n                                <sw-loader v-if="isLoading"></sw-loader>\n                            {% endblock %}\n                        {% endblock %}\n                    </sw-card-view>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-page>\n{% endblock %}\n'},vAmH:function(e,t,n){},xZag:function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var f=Shopware.Classes.ApiService,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t,n,i,o=g(r);function r(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"finsearch";return s(this,r),(n=o.call(this,e,t,i)).name="FinsearchConfigApiService",n}return t=r,(n=[{key:"getValues",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.httpClient.get("_action/finsearch",{params:a({salesChannelId:e,languageId:t},n),headers:this.getBasicHeaders(i)}).then((function(e){return f.handleResponse(e)}))}},{key:"saveValues",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.httpClient.post("_action/finsearch",e,{params:a({salesChannelId:t,languageId:n},i),headers:this.getBasicHeaders(o)}).then((function(e){return f.handleResponse(e)}))}},{key:"batchSave",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.httpClient.post("_action/finsearch/batch",e,{params:a({},t),headers:this.getBasicHeaders(n)}).then((function(e){return f.handleResponse(e)}))}}])&&l(t.prototype,n),i&&l(t,i),r}(f),p=Shopware.Application;p.addServiceProvider("FinsearchConfigApiService",(function(e){var t=p.getContainer("init");return new h(t.httpClient,e.loginService)}));var y=n("6q4v"),v=n.n(y),m=n("kmpu"),b=n.n(m);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=Shopware,k=w.Component,x=w.State;k.override("sw-self-maintained-extension-card",{template:v.a,mounted:function(){"FinSearch"!==this.extension.name||this.supportsOpenAppMechanism()||(this.extension.configurable=!0)},computed:{extensionCardClasses:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"sw-self-maintained-extension-card":!0},this.$super("extensionCardClasses"))}},methods:{supportsOpenAppMechanism:function(){return!!x.get("extensionEntryRoutes")}}}),k.override("sw-plugin-list",{template:b.a});var O=n("rtuN"),_=n.n(O);n("cEZJ");function F(e,t,n,i,o,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=Shopware,T=E.Component,$=E.Mixin,R=E.Application,j=Shopware.Data.Criteria;T.register("findologic-page",{template:_.a,inject:["repositoryFactory","FinsearchConfigApiService","systemConfigApiService"],mixins:[$.getByName("notification")],data:function(){return{isLoading:!1,isSaveSuccessful:!1,isStagingShop:!1,shopkeyExists:!1,isRegisteredShopkey:null,isActive:!1,config:null,allConfigs:{},selectedSalesChannelId:null,selectedSalesChannelNavigationCategoryId:null,selectedLanguageId:null,salesChannel:[],language:[],shopkeyErrorState:null,httpClient:R.getContainer("init").httpClient}},metaInfo:function(){return{title:this.$createTitle()}},created:function(){this.createdComponent()},beforeMount:function(){this.updateHeaderBarBackLink()},watch:{selectedLanguageId:{handler:function(e){e&&this.createdComponent()}},shopkey:function(){this.shopkeyErrorState=null,this.isValidShopkey?this._isStagingRequest():this.actualConfigData&&(this.actualConfigData["FinSearch.config.active"]=!1,this.actualConfigData["FinSearch.config.activeOnCategoryPages"]=!1),this._setErrorStates()}},computed:{configKey:function(){return this.selectedSalesChannelId&&this.selectedLanguageId?this.selectedSalesChannelId+"-"+this.selectedLanguageId:null},actualConfigData:{get:function(){return this.allConfigs[this.configKey]},set:function(e){this.allConfigs=P(P({},this.allConfigs),{},D({},this.configKey,e))}},shopkey:function(){return this.actualConfigData?this.actualConfigData["FinSearch.config.shopkey"]:""},isValidShopkey:function(){return!1!==/^[A-F0-9]{32}$/.test(this.shopkey)},shopkeyAvailable:function(){return!!this.shopkey},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},languageRepository:function(){return this.repositoryFactory.create("language")},findologicConfigRepository:function(){return this.repositoryFactory.create("finsearch_config")}},methods:{createdComponent:function(){var e=this;if(this.selectedSalesChannelId&&this.selectedLanguageId&&(this.isLoading=!0,this.readAll().then((function(t){t["FinSearch.config.filterPosition"]||(t["FinSearch.config.filterPosition"]="top"),t["FinSearch.config.mainVariant"]||(t["FinSearch.config.mainVariant"]="default"),e.actualConfigData=t,e.isLoading=!1}))),!this.salesChannel.length){this.isLoading=!0;var t=new j;t.addAssociation("languages"),t.addAssociation("domains"),t.addAssociation("navigationCategory"),t.addFilter(j.equals("active",!0)),this.salesChannelRepository.search(t,Shopware.Context.api).then((function(t){e.isLoading=!1,e.salesChannel=t}))}},updateHeaderBarBackLink:function(){var e=null;Shopware.Module.getModuleRegistry().forEach((function(t){e||"sw-extension-store.title"===t.manifest.title&&(e=t)})),e&&(this.$route.meta.parentPath="sw.extension.my-extensions.listing.app",this.$route.meta.$module=e.manifest)},readAll:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.FinsearchConfigApiService.getValues(t.selectedSalesChannelId,t.selectedLanguageId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function r(e){F(a,i,o,r,s,"next",e)}function s(e){F(a,i,o,r,s,"throw",e)}r(void 0)}))})()},_isStagingRequest:function(){var e=this;this.httpClient.get("https://cdn.findologic.com/config/".concat(this.shopkey,"/config.json")).then((function(t){t.data.isStagingShop&&(e.isStagingShop=!0)})).catch((function(){e.isStagingShop=!1}))},onSave:function(){var e=this;this.shopkeyAvailable&&!this.isValidShopkey?this._setErrorStates(!0):this.shopkeyAvailable?this._validateShopkeyFromService().then((function(t){e.isRegisteredShopkey=t})).then((function(){e.isRegisteredShopkey?e._save():e._setErrorStates(!0)})):this._save()},_save:function(){var e=this;this.isLoading=!0,this.isSaveSuccessful=!1,this.FinsearchConfigApiService.batchSave(this.allConfigs).then((function(t){e.shopkeyExists=!1,e.shopkeyErrorState=null,e.isLoading=!1,e.isSaveSuccessful=!0,e.createNotificationSuccess({title:e.$tc("findologic.settingForm.titleSuccess"),message:e.$tc("findologic.settingForm.configSaved")}),t&&(e.actualConfigData=t)})).catch((function(t){e.isSaveSuccessful=!1,e.isLoading=!1,e.shopkeyExists=!0,e._setErrorStates(!0)}))},_setErrorStates:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=!1,this.shopkeyAvailable&&(this.isValidShopkey?!1===this.isRegisteredShopkey?this.shopkeyErrorState={code:1,detail:this.$tc("findologic.notRegisteredShopkey")}:!0===this.shopkeyExists?this.shopkeyErrorState={code:1,detail:this.$tc("findologic.shopkeyExists")}:(this.shopkeyExists=!1,this.isRegisteredShopkey=!0,this.shopkeyErrorState=null):this.shopkeyErrorState={code:1,detail:this.$tc("findologic.invalidShopkey")}),e&&this._showNotification()},_showNotification:function(){this.shopkeyAvailable?this.isValidShopkey?!1===this.isRegisteredShopkey?this.createNotificationError({title:this.$tc("findologic.settingForm.titleError"),message:this.$tc("findologic.notRegisteredShopkey")}):!0===this.shopkeyExists&&this.createNotificationError({title:this.$tc("findologic.settingForm.titleError"),message:this.$tc("findologic.shopkeyExists")}):this.createNotificationError({title:this.$tc("findologic.settingForm.titleError"),message:this.$tc("findologic.invalidShopkey")}):this.createNotificationError({title:this.$tc("findologic.settingForm.titleError"),message:this.$tc("findologic.fieldRequired")})},_validateShopkeyFromService:function(){var e=this;return this.isLoading=!0,this.httpClient.get("https://account.findologic.com/api/v1/shopkey/validate/".concat(this.shopkey)).then((function(t){return e.isLoading=!1,String(t.status).startsWith("2")})).catch((function(){return!1}))},onSelectedLanguage:function(e){this.shopkeyErrorState=null,this.selectedLanguageId=e,this.createdComponent()},onSelectedSalesChannel:function(e){var t=this;if(this.language=[],void 0!==this.salesChannel&&null!==e){var n=this.salesChannel.find((function(t){return t.id===e}));n&&(this.selectedSalesChannelId=e,this.selectedSalesChannelNavigationCategoryId=n.navigationCategory.id,this.onSelectedLanguage(n.languageId),n.languages.forEach((function(e){var i=n.domains.find((function(t){return t.languageId===e.id}));i&&null!==i.url&&""!==i.url&&t.language.push({name:e.name,label:e.name,value:e.id})})))}else this.onSelectedLanguage(null)}}});var A=n("iH4O"),L=n.n(A);function N(e,t,n,i,o,a,r){try{var s=e[a](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}var B=Shopware,V=B.Component,q=B.Mixin,M=Shopware.Data,K=M.Criteria,G=M.EntityCollection;V.register("findologic-config",{template:L.a,name:"FindologicConfig",inject:["repositoryFactory"],mixins:[q.getByName("notification")],props:{actualConfigData:{required:!0},allConfigs:{type:Object,required:!0},shopkeyErrorState:{required:!0},selectedSalesChannelNavigationCategoryId:{type:String,required:!1,default:null},selectedSalesChannelId:{type:String,required:!1,default:null},isStagingShop:{type:Boolean,required:!0,default:!1},isValidShopkey:{type:Boolean,required:!0,default:!1},isActive:{type:Boolean,required:!0,default:!1},shopkeyAvailable:{type:Boolean,required:!0,default:!1}},data:function(){return{isLoading:!1,categoryCollection:null}},created:function(){this.createCategoryCollection()},methods:{createCategoryCollection:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.actualConfigData["FinSearch.config.crossSellingCategories"].length){e.next=6;break}return e.next=3,t.categoryRepository.search(t.selectedCategoriesCriteria,Shopware.Context.api);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=new G(t.categoryRepository.route,t.categoryRepository.entityName,Shopware.Context.api,null,[]);case 7:t.categoryCollection=e.t0;case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function r(e){N(a,i,o,r,s,"next",e)}function s(e){N(a,i,o,r,s,"throw",e)}r(void 0)}))})()},isString:function(e){if("string"!=typeof e)return!0},isBoolean:function(e){return"boolean"!=typeof e},openSalesChannelUrl:function(){var e=this;if(null!==this.selectedSalesChannelId){var t=new K;t.addFilter(K.equals("id",this.selectedSalesChannelId)),t.setLimit(1),t.addAssociation("domains"),this.salesChannelRepository.search(t,Shopware.Context.api).then((function(t){var n=t.first().domains.first();e._openStagingUrl(n)}))}else this._openDefaultUrl()},_openDefaultUrl:function(){var e="".concat(window.location.origin,"?findologic=on");window.open(e,"_blank")},_openStagingUrl:function(e){if(e){var t="".concat(e.url,"?findologic=on");window.open(t,"_blank")}else this._openDefaultUrl()},onCategoryAdd:function(e){this.actualConfigData["FinSearch.config.crossSellingCategories"].push(e.id)},onCategoryRemove:function(e){this.actualConfigData["FinSearch.config.crossSellingCategories"]=this.actualConfigData["FinSearch.config.crossSellingCategories"].filter((function(t){return t!==e.id}))}},computed:{showTestButton:function(){return this.isActive&&this.shopkeyAvailable&&this.isValidShopkey&&this.isStagingShop},showAPIConfig:function(){return void 0===this.integrationType||"API"===this.integrationType},showDIConfig:function(){return void 0===this.integrationType||"Direct Integration"===this.integrationType},filterPositionOptions:function(){return[{label:this.$tc("findologic.settingForm.config.filterPosition.top.label"),value:"top"},{label:this.$tc("findologic.settingForm.config.filterPosition.left.label"),value:"left"}]},mainVariantOptions:function(){return[{label:this.$tc("findologic.settingForm.config.mainVariant.default.label"),value:"default"},{label:this.$tc("findologic.settingForm.config.mainVariant.parent.label"),value:"parent"},{label:this.$tc("findologic.settingForm.config.mainVariant.cheapest.label"),value:"cheapest"}]},integrationType:function(){return this.actualConfigData["FinSearch.config.integrationType"]},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},categoryRepository:function(){return this.repositoryFactory.create("category")},categories:function(){return this.categoryCollection?this.categoryCollection:[]},selectedCategoriesCriteria:function(){var e=new K;return e.addFilter(K.equalsAny("id",this.actualConfigData["FinSearch.config.crossSellingCategories"])),e}}});var U=n("kfPE"),H=n("KBz0");Shopware.Module.register("findologic-module",{type:"plugin",name:"FinSearch",title:"findologic.header",description:"findologic.general.mainMenuDescription",color:"#f7ff0f",snippets:{"de-DE":H,"en-GB":U},routes:{index:{component:"findologic-page",path:"index",meta:{parentPath:"sw.settings.index"}}},extensionEntryRoute:{extensionName:"FinSearch",route:"findologic.module.index"}})}});